-- Create products table

CREATE TABLE IF NOT EXISTS products (
        id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
        name VARCHAR(255) NOT NULL
);


-- Create variants table

CREATE TABLE IF NOT EXISTS variants (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    concentration VARCHAR(50),
    flavor VARCHAR(50),
    weight VARCHAR(50)
);


-- Create addresses table

CREATE TABLE IF NOT EXISTS addresses (
         id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
         line1 VARCHAR(255) NOT NULL,
         line2 VARCHAR(255),
         city VARCHAR(100) NOT NULL,
         state VARCHAR(100) NOT NULL,
         zip_code VARCHAR(20) NOT NULL
);


-- Create the sample_requests table with foreign key references

CREATE TABLE IF NOT EXISTS sample_requests (
       id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
       product_id BIGINT NOT NULL,
       variant_id BIGINT NOT NULL,
       sample_quantity VARCHAR(100) NOT NULL,
       sample_application TEXT,
       address_id BIGINT NOT NULL,
       additional_information TEXT,
       created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
       created_by VARCHAR(255) NOT NULL,
       FOREIGN KEY (product_id) REFERENCES products(id),
       FOREIGN KEY (variant_id) REFERENCES variants(id),
       FOREIGN KEY (address_id) REFERENCES addresses(id)
);

-- TRUNCATE TABLE products RESTART IDENTITY CASCADE;
-- TRUNCATE TABLE addresses RESTART IDENTITY CASCADE;
-- TRUNCATE TABLE sample_requests RESTART IDENTITY CASCADE;
-- TRUNCATE TABLE variants RESTART IDENTITY CASCADE;

